<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="795px" preserveAspectRatio="none" style="width:408px;height:795px;" version="1.1" viewBox="0 0 408 795" width="408px" zoomAndPan="magnify"><defs><filter height="300%" id="f139xakj64rtz8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="132" x="133.5" y="26.708">HTTPS加密流程</text><rect fill="#ADD8E6" height="745.9844" style="stroke: #A80036; stroke-width: 1.0;" width="198" x="4" y="38.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="82" y="51.02">Client</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="29" x2="29" y1="141.3828" y2="698.6406"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="157" x2="157" y1="141.3828" y2="698.6406"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="295" x2="295" y1="141.3828" y2="698.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="37" x="8" y="138.0811">client</text><ellipse cx="29.5" cy="68.0859" fill="#FEFECE" filter="url(#f139xakj64rtz8)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M29.5,76.0859 L29.5,103.0859 M16.5,84.0859 L42.5,84.0859 M29.5,103.0859 L16.5,118.0859 M29.5,103.0859 L42.5,118.0859 " fill="none" filter="url(#f139xakj64rtz8)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="37" x="8" y="710.6357">client</text><ellipse cx="29.5" cy="723.9375" fill="#FEFECE" filter="url(#f139xakj64rtz8)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M29.5,731.9375 L29.5,758.9375 M16.5,739.9375 L42.5,739.9375 M29.5,758.9375 L16.5,773.9375 M29.5,758.9375 L42.5,773.9375 " fill="none" filter="url(#f139xakj64rtz8)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="75" x="117" y="138.0811">user agent</text><ellipse cx="157.5" cy="109.0859" fill="#FEFECE" filter="url(#f139xakj64rtz8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="145.5" x2="169.5" y1="123.0859" y2="123.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="75" x="117" y="710.6357">user agent</text><ellipse cx="157.5" cy="729.9375" fill="#FEFECE" filter="url(#f139xakj64rtz8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="145.5" x2="169.5" y1="743.9375" y2="743.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="43" x="271" y="138.0811">server</text><ellipse cx="295.5" cy="109.0859" fill="#FEFECE" filter="url(#f139xakj64rtz8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="283.5" x2="307.5" y1="123.0859" y2="123.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="43" x="271" y="710.6357">server</text><ellipse cx="295.5" cy="729.9375" fill="#FEFECE" filter="url(#f139xakj64rtz8)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="283.5" x2="307.5" y1="743.9375" y2="743.9375"/><rect fill="#EEEEEE" filter="url(#f139xakj64rtz8)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="393" x="3" y="171.9492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="396" y1="171.9492" y2="171.9492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="396" y1="174.9492" y2="174.9492"/><rect fill="#EEEEEE" filter="url(#f139xakj64rtz8)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="71" x="164" y="161.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="170" y="177.4497">秘钥协商</text><polygon fill="#A80036" points="145.5,211.6484,155.5,215.6484,145.5,219.6484,149.5,215.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="29.5" x2="151.5" y1="215.6484" y2="215.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="36.5" y="210.5825">访问网站</text><polygon fill="#A80036" points="283.5,240.7813,293.5,244.7813,283.5,248.7813,287.5,244.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="157.5" x2="289.5" y1="244.7813" y2="244.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="164.5" y="239.7153">https请求</text><polygon fill="#FBFB77" filter="url(#f139xakj64rtz8)" points="210,257.7813,381,257.7813,391,268.7813,381,280.7813,210,280.7813,200,268.7813,210,257.7813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="212" y="273.8481">保存server的私钥</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="317" y="273.8481">privateA</text><polygon fill="#A80036" points="168.5,303.0469,158.5,307.0469,168.5,311.0469,164.5,307.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="162.5" x2="294.5" y1="307.0469" y2="307.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="174.5" y="301.981">传输证书</text><polygon fill="#FBFB77" filter="url(#f139xakj64rtz8)" points="85,320.0469,230,320.0469,240,339.0469,230,358.0469,85,358.0469,75,339.0469,85,320.0469" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="87" y="336.1138">获取、保存证书中保存</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="87" y="351.2466">server的公钥</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="166" y="351.2466">privateA</text><polygon fill="#FBFB77" filter="url(#f139xakj64rtz8)" points="79,368.3125,235,368.3125,245,379.3125,235,391.3125,79,391.3125,69,379.3125,79,368.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="81" y="384.3794">生成用于对称加密的私钥B</text><polygon fill="#FBFB77" filter="url(#f139xakj64rtz8)" points="80,401.4453,234,401.4453,244,412.4453,234,424.4453,80,424.4453,70,412.4453,80,401.4453" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="82" y="417.5122">公钥</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="108" y="417.5122">privateA</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="170" y="417.5122">加密私钥</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="222" y="417.5122">B</text><polygon fill="#A80036" points="283.5,446.7109,293.5,450.7109,283.5,454.7109,287.5,450.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="157.5" x2="289.5" y1="450.7109" y2="450.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="164.5" y="445.645">传输加密后的私钥</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="268.5" y="445.645">B</text><polygon fill="#FBFB77" filter="url(#f139xakj64rtz8)" points="243,463.7109,348,463.7109,358,474.7109,348,486.7109,243,486.7109,233,474.7109,243,463.7109" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="245" y="479.7778">解密、保存私钥</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="336" y="479.7778">B</text><rect fill="#EEEEEE" filter="url(#f139xakj64rtz8)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="393" x="3" y="512.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="396" y1="512.4102" y2="512.4102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="396" y1="515.4102" y2="515.4102"/><rect fill="#EEEEEE" filter="url(#f139xakj64rtz8)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="71" x="164" y="501.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="170" y="517.9106">数据传输</text><polygon fill="#A80036" points="145.5,552.1094,155.5,556.1094,145.5,560.1094,149.5,556.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="29.5" x2="151.5" y1="556.1094" y2="556.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="36.5" y="551.0435">触发加密数据传输</text><polygon fill="#A80036" points="283.5,581.2422,293.5,585.2422,283.5,589.2422,287.5,585.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="157.5" x2="289.5" y1="585.2422" y2="585.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="164.5" y="580.1763">数据请求</text><polygon fill="#FBFB77" filter="url(#f139xakj64rtz8)" points="249,598.2422,341,598.2422,351,609.2422,341,621.2422,249,621.2422,239,609.2422,249,598.2422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="251" y="614.3091">私钥</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="277" y="614.3091">B</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="287" y="614.3091">加密数据</text><polygon fill="#A80036" points="168.5,643.5078,158.5,647.5078,168.5,651.5078,164.5,647.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162.5" x2="294.5" y1="647.5078" y2="647.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="174.5" y="642.4419">数据响应</text><polygon fill="#FBFB77" filter="url(#f139xakj64rtz8)" points="111,660.5078,203,660.5078,213,671.5078,203,683.5078,111,683.5078,101,671.5078,111,660.5078" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="113" y="676.5747">私钥</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10" x="139" y="676.5747">B</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="149" y="676.5747">解密数据</text><!--MD5=[f66cf336b51ffc18ee9469b583098419]
@startuml HTTPS加密流程
title HTTPS加密流程

box "Client" #LightBlue
actor __client__ as C
entity "__user agent__" as A
end box
entity __server__ as S

== 秘钥协商 ==
C -> A: 访问网站
A -> S: https请求
hnote over S: 保存server的私钥**privateA**
A <- - S: 传输证书
hnote over A
  获取、保存证书中保存
  server的公钥**privateA**
end hnote
hnote over A: 生成用于对称加密的私钥B
hnote over A: 公钥**privateA**加密私钥**B**
A -> S: 传输加密后的私钥**B**
hnote over S: 解密、保存私钥**B**
== 数据传输 ==
C -> A: 触发加密数据传输
A -> S: 数据请求
hnote over S: 私钥**B**加密数据
A <- S: 数据响应
hnote over A: 私钥**B**解密数据


@enduml

PlantUML version 1.2020.12(Sat Jun 06 10:54:15 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>